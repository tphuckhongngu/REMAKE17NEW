#Quản lý tọa độ, vận tốc, hướng bay, hình ảnh, không phụ thuộc vào camera
	# bullet.py
import pygame
import math

class Bullet(pygame.sprite.Sprite):
    def __init__(self, pos, direction):
        super().__init__()

        self.image = pygame.Surface((6, 6), pygame.SRCALPHA)
        pygame.draw.circle(self.image, (255, 200, 0), (3, 3), 3)
        self.rect = self.image.get_rect(center=pos)

        self.pos = pygame.math.Vector2(pos)
        self.direction = direction
        self.speed = 15

    def update(self):
        self.pos += self.direction * self.speed
        self.rect.center = self.pos


#Đạn bay đúng hướng con trỏ chuột


def get_bullet_direction(player_pos):
    mouse_x, mouse_y = pygame.mouse.get_pos()

    dx = mouse_x - player_pos[0]
    dy = mouse_y - player_pos[1]

    angle = math.atan2(dy, dx)

    direction = pygame.math.Vector2(
        math.cos(angle),
        math.sin(angle)
    )

    return direction
